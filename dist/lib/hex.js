const BoardHex=Honeycomb.extendHex({size:65,orientation:"flat",index:!1,isPlayerHex:!1,isSpecial:!1,player:0,magni:!1,nftid:!1,hexDraw:!1,canvas:!1,border:!1,image:!1,dx:0,dy:0,type:"",init(t,i){var{x:e,y:s}=this.toPoint();this.dx=e+hexOffsetX,this.dy=s+hexOffsetY,this.type=t;const a=this.corners();this.hexDraw=i,this.border=this.hexDraw.polygon(a.map((({x:t,y:i})=>`${t},${i}`))).stroke({width:1,color:"#fff"}).translate(this.dx,this.dy).fill("transparent").opacity(.9),this.canvas=this.hexDraw.group(),"game"==t?(this.border.stroke({width:1,color:"transparent"}),this.canvas.image("assets/heros/field.png").translate(this.dx,this.dy)):this.canvas=this.hexDraw.group(),this.hexDraw.addClass("clickable")},clear(){selectedHex=!1,this.removeCard()},removeCard(){this.magni=!1,this.highlight("transparent"),this.canvas&&this.canvas.clear()},highlight(t){this.border.fill(t)},unhighlight(){this.highlight(CONFIG.colors.hexBg)},set(t,i){this.magni=t,i||(i="transparent"),this.canvas&&this.canvas.clear(),this.image=currentRoom.draw.image("assets/heros/h"+t[1].magni+".png").translate(this.dx,this.dy),this.isPlayerHex&&this.image.flip("x").translate(130,0),this.canvas.add(this.image);var e=getCardRank(this.magni[1].magni);this.canvas.image("assets/heros/ring"+(e-1)+".png").translate(this.dx,this.dy);for(var s="",a=0;a<e;a++)s+="*";var r="white",n="black";this.canvas.text(s).translate(this.dx+65,this.dy+67).font(CONFIG.fonts.units).fill("#fec80e").stroke({width:.1,color:"#fec80e"}),this.canvas.text(CONFIG.magni[this.magni[1].magni][1].toString()).translate(this.dx+31,this.dy+60).font(CONFIG.fonts.units).fill(r).stroke({width:1,color:n}),this.canvas.text(CONFIG.magni[this.magni[1].magni][2].toString()).translate(this.dx+31,this.dy+18).font(CONFIG.fonts.units).fill(r).stroke({width:1,color:n}),this.canvas.text(CONFIG.magni[this.magni[1].magni][4].toString()).translate(this.dx+95,this.dy+18).font(CONFIG.fonts.units).fill(r).stroke({width:1,color:n}),this.canvas.text(CONFIG.magni[this.magni[1].magni][5].toString()).translate(this.dx+95,this.dy+60).font(CONFIG.fonts.units).fill(r).stroke({width:1,color:n}),this.canvas.text(CONFIG.magni[this.magni[1].magni][3].toString()).translate(this.dx+64,this.dy+0).font(CONFIG.fonts.units).fill(r).stroke({width:1,color:n}),this.canvas.text(CONFIG.magni[this.magni[1].magni][3].toString()).translate(this.dx+64,this.dy+78).font(CONFIG.fonts.units).fill(r).stroke({width:1,color:n}),this.border.fill(i)},special(t,i){var{x:e,y:s}=this.toPoint();hexOffsetX,hexOffsetY,this.magni=i,this.isSpecial=!0,this.highlight("#333"),this.canvas.text(t).translate(this.dx+65,this.dy+40).font({size:14,anchor:"middle",family:"Verdana",weight:"bold"}).fill("white")},place(t,i,e){this.player=t,this.set(i,e)}}),Grid=Honeycomb.defineGrid(BoardHex),herogrid=Grid.rectangle({width:5,height:4,start:[6,1]}),playergrid=Grid([1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[2,4],[3,1],[3,2],[3,3]),premadegrid=Grid([6,5],[8,5],[10,5]);document.addEventListener("click",(({offsetX:t,offsetY:i})=>{if("undefined"!=typeof currentRoom&&void 0!==currentRoom.hexClickHandler){const e=Grid.pointToHex(t-hexOffsetX,i-hexOffsetY);playergrid.get(e)&&currentRoom.hexClickHandler(t,i,playergrid.get(e)),currentRoom==rooms.lobby&&(premadegrid.get(e)&&currentRoom.hexClickHandler(t,i,premadegrid.get(e)),herogrid.get(e)&&currentRoom.hexClickHandler(t,i,herogrid.get(e))),currentRoom==rooms.game&&gamegrid.get(e)&&currentRoom.hexClickHandler(t,i,gamegrid.get(e))}}));