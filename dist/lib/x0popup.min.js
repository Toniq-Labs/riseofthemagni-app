"use strict";var x0popup,x0p,x0pDefaultConfig={title:"Message",text:null,theme:"default",overlay:!0,width:"90%",height:"50%",maxWidth:"450px",maxHeight:"200px",type:"text",icon:null,iconURL:null,inputType:null,inputValue:null,inputPlaceholder:null,inputColor:null,inputValidator:null,inputPromise:null,showCancelButton:null,buttons:null,autoClose:null,html:!1,animation:!0,animationType:"pop",overlayAnimation:!0,keyResponse:!0,showButtonOutline:!1,buttonTextOk:"OK",buttonTextConfirm:"Confirm",buttonTextCancel:"Cancel",buttonTextDefault:"Button"};(x0popup=x0p=function(){function t(){var x="";return x+="width: "+y.width+";",x+="height: "+y.height+";",null!=y.maxWidth&&(x+="max-width: "+y.maxWidth+";"),null!=y.maxHeight&&(x+="max-height: "+y.maxHeight+";"),y.animation&&(x+="-webkit-animation-name: x0p"+y.animationType+"; animation-name: x0p"+y.animationType+";"),!y.overlay&&(x+="outline: 1px solid #ddd"),x}function e(){var x="";switch(x+='<div class="icon-wrapper">',null==y.icon?y.type:y.icon){case"ok":x+='<i class="xi xi-ok"><span class="xi-ok-left"></span><span class="xi-ok-right"></span></i>';break;case"error":x+='<i class="xi xi-error"><span class="xi-error-left"></span><span class="xi-error-right"></span></i>';break;case"info":x+='<i class="xi xi-info"><span class="xi-info-circle"></span><span class="xi-info-line"></span></i>';break;case"warning":x+='<i class="xi xi-warning"><span class="xi-warning-circle"></span><span class="xi-warning-line"></span></i>';break;case"custom":x+='<i class="xi" style="background: url(\''+y.iconURL+"') no-repeat center center; background-size: 100% 100%;\"></i>"}return x+"</div>"}function n(){var f="";if(null==(x=y.buttons)&&(x=[],1!=y.showCancelButton&&(0==y.showCancelButton||"warning"!=y.type&&"input"!=y.type)||x.push({type:"cancel",key:27}),"text"==y.type||"input"==y.type?x.push({type:"info",key:13}):x.push({type:y.type,key:13})),0==x.length)return"";var m=1==y.keyResponse?"button":"div",h=x.length,g="width: "+(100/h).toFixed(2)+"%; width: calc(100% / "+h+");",b=1==y.showButtonOutline?" button-outline":"";f+='<div id="x0p-buttons" class="buttons">';for(var w=0;w<x.length;++w){var k=x[w];f+="<"+m+' id="x0p-button-'+w+'" class="button button-'+k.type+b+'" style="'+g+'">'+c(k)+"</"+m+">"}return f+"</div>"}function i(x){var f=document.getElementById(x);null!=f&&f.parentNode.removeChild(f)}function l(){g.classList.remove("noscroll"),document.removeEventListener("keydown",u),i("x0popup"),i("x0p-overlay")}function o(){document.getElementById("x0p-buttons").innerHTML='<div class="x0l"><div class="ball ball-4"></div><div class="ball ball-3"></div><div class="ball ball-2"></div><div class="ball ball-1"></div></div>'}function a(){for(var f=x.length-1,m=0;m<x.length;++m){var h=document.getElementById("x0p-button-"+m);!function(x,f){h.addEventListener("click",(function(){r(x,f)}))}(x[m].type,x[m].showLoading),h.addEventListener("mousedown",(function(x){x.preventDefault?x.preventDefault():x.returnValue=!1})),1==x[m].default&&(f=m)}y.keyResponse&&x.length>0?(document.getElementById("x0p-button-"+(x.length-1)).addEventListener("keydown",(function(x){9==x.keyCode&&(document.getElementById("x0p-button-0").focus(),x.preventDefault?x.preventDefault():x.returnValue=!1)})),document.getElementById("x0p-button-"+f).focus()):document.activeElement.blur()}function u(f){for(var m=f.keyCode,y=0;y<x.length;++y)if(m==x[y].key){var h=document.getElementById("x0p-button-"+y);f.preventDefault?f.preventDefault():f.returnValue=!1,h&&h.click()}}function r(x,f){if(null!=document.getElementById("x0popup")){var m=document.getElementById("x0p-input");if("cancel"!=x&&null!=T&&null!=m){if(null!=y.inputPromise)return void y.inputPromise(x,m.value).then((function(m){null!=m?p(m):s(x,f)}));if(null!=y.inputValidator){var h=y.inputValidator(x,m.value);if(null!=h)return void p(h)}}s(x,f)}}function s(x,f){var y=document.getElementById("x0p-input");clearTimeout(h),1==f?o():l();var g=null==y?null:y.value;null!=m&&m(x,g,l),w({button:x,text:g,close:l})}function p(x){i("x0p-input-error"),document.getElementById("x0p-input-anchor").insertAdjacentHTML("beforeend",'<div id="x0p-input-error" class="error">'+x+"</div>")}function c(x){if(x.hasOwnProperty("text"))return x.text;switch(x.type){case"ok":case"error":case"info":return x0pDefaultConfig.buttonTextOk;case"warning":return x0pDefaultConfig.buttonTextConfirm;case"cancel":return x0pDefaultConfig.buttonTextCancel;default:return x0pDefaultConfig.buttonTextDefault}}function d(){var x=y.inputColor;return null==x?"":"<style>#x0p-input:focus { border-color:"+x+"; color:"+x+"; }</style>"}function v(x){var f=document.createElement("div");return f.innerText=f.textContent=x,f.innerHTML}var x,f=arguments[0],m=null,y=JSON.parse(JSON.stringify(x0pDefaultConfig)),h=null,g=document.body;if("string"==typeof f)y.title=arguments[0],null!=arguments[1]&&(y.text=arguments[1]),null!=arguments[2]&&(y.type=arguments[2]),null!=arguments[3]&&("boolean"==typeof arguments[3]?y.overlayAnimation=arguments[3]:m=arguments[3]);else{for(var b in f)y[b]=f[b];null!=arguments[1]&&(m=arguments[1])}var w,k="",C=null==y.icon&&("text"==y.type||"input"==y.type),T=null!=y.inputType?y.inputType:"input"==y.type?"text":null,E=null==y.inputValue?"":y.inputValue,B=null==y.inputPlaceholder?"":y.inputPlaceholder,D=n(),L=new Promise((function(f,m){w=f,m,y.overlay&&(k+='<div id="x0p-overlay" class="x0p-overlay'+(y.animation&&y.overlayAnimation?"":" no-animation")+'"></div>'),k+='<div id="x0popup" class="x0p '+y.theme+(0==y.animation?" no-animation":"")+(0==x.length?" no-button":"")+'" style="'+t()+'">',k+='<div class="content">',k+=C?'<div class="text-pure-wrapper">':e()+'<div class="text-wrapper">',k+='<div class="text-anchor">',k+='<div class="title">'+y.title+"</div>",null!=y.text&&(k+='<div class="text">'+(y.html?y.text:v(y.text))+"</div>"),null!=T&&(k+='<div id="x0p-input-anchor" class="input">'+d()+'<input id="x0p-input" type="'+T+'" placeholder="'+B+'" value="'+E+'"></div>'),k+="</div>",k+="</div>",k+="</div>",k+=D,k+="</div>",l(),g.insertAdjacentHTML("beforeend",k),g.classList.add("noscroll"),a(),1==y.keyResponse&&document.addEventListener("keydown",u);var b=document.getElementById("x0p-input");null!=T&&b.focus(),null!=y.autoClose&&(h=setTimeout((function(){r("timeout")}),y.autoClose))}));return L}).setDefault=x0p.setDefault=function(){var x=arguments[0];for(var f in x)x0pDefaultConfig[f]=x[f]},"object"==typeof module&&(module.exports=x0popup);