{"version":3,"sources":["webpack://rotm_v2/webpack/runtime/chunk loaded","webpack://rotm_v2/./src/extjs.js","webpack://rotm_v2/./src/rotm.did.js","webpack://rotm_v2/./src/main.js","webpack://rotm_v2/webpack/bootstrap","webpack://rotm_v2/webpack/runtime/amd options","webpack://rotm_v2/webpack/runtime/compat get default export","webpack://rotm_v2/webpack/runtime/define property getters","webpack://rotm_v2/webpack/runtime/global","webpack://rotm_v2/webpack/runtime/hasOwnProperty shorthand","webpack://rotm_v2/webpack/runtime/make namespace object","webpack://rotm_v2/webpack/runtime/node module decorator","webpack://rotm_v2/webpack/runtime/jsonp chunk loading","webpack://rotm_v2/webpack/startup"],"names":["deferred","_preloadedIdls","ExtConnection","_mapIdls","_identity","_host","_agent","_canisters","constructor","host","identity","this","_makeAgent","idl","canister","setIdentity","setHost","cid","hasOwnProperty","Error","agent","canisterId","args","idlFactory","IDL","HexNeighbors","Tuple","Opt","Nat","BoardHex","Record","Nat8","Board","Vec","Text","BoardId","Nat32","MagniAttack","Magni","MagniId","MagniNFTId","ItemId","MagniNFT","Bool","GameHash","OpponentId","GameOption","Variant","GameId","GameScore","GameResult","Principal","GameStatus","Null","GameState","Response","Move","PlayerMove","GameData","Service","Func","AUTH","logintype","openlogin","clientId","network","uxMode","async","unloadROTM","ROTM","gameLeave","showLoader","document","addEventListener","API","init","GD","getGameData","i","magni","length","CONFIG","push","name","concat","attack","boards","toLowerCase","hexs","map","a","coords","offsetX","offsetY","currentRoom","click","hideLoader","rooms","login","enter","window","e","onbeforeunload","currentSound","bgmuted","mute","updateGameState","gs","_intv","state","status","game","SOUND","alert","play","_stopPolling","gameState","lead","isPlayer1","drawMessage","selectedHex","unhighlight","clear","currentPlayer","otherPlayer","moves","isPlayersTurn","ended","noresult","backButton","show","win","scoreMsg","lose","bgmusic","movesMade","p","gamegrid","isPlayerHex","place","colors","ally","enemy","placeHex","drawScore","fromHexString","hex","substr","bytes","c","parseInt","_gameState","_gameId","_clearPolling","clearInterval","_startPolling","setInterval","gamePoll","then","r","ok","console","log","err","inGame","gameFind","roster","poll","Promise","resolve","reject","mids","m","resp","catch","gamePractise","gameCreate","practice","gameMove","position","gameEnd","connect","mymagni","stats","draw","INNERDRAW","group","exit","id","getIdentity","getPrincipal","toString","setTimeout","menu","privKey","Uint8Array","setBackground","createButton","maxTimeToLive","BigInt","identityProvider","onSuccess","onError","open","focus","lobby","settings","logout","msfx","umsfx","mbg","umbg","select","hide","sfxmuted","adventure","chapter","stage","scene","clickHandler","inAdventureMode","s","launchAdventure","headerMessage","hexClickHandler","buttonIsFree","x","y","type","playergrid","set","hexBg","removeCard","updateSelectedTeam","herogrid","magnitomove","pop","starters","indexOf","drawCurrentRating","gameMode","gm","playOnlineBtn","backBtn","cancelBtn","isValidTeam","selectedTeam","finally","premadegrid","special","omd","rd","highlight","player","index","character","board","result","playerScore","opponentScore","bbt","bbfn","localScore","standard","Grid","st1","st2","Howl","src","battle","volume","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","amdO","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","Symbol","toStringTag","value","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"mappings":"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","file":"bundle.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/* global BigInt */\r\nimport { Actor, HttpAgent } from \"@dfinity/agent\";  \r\n\r\n//Preload IDLS against a common name\r\nconst _preloadedIdls = {\r\n\r\n};\r\n\r\nclass ExtConnection {\r\n  _mapIdls = {\r\n  };\r\n\r\n  _identity = false;\r\n  _host = false;\r\n  _agent = false;\r\n  _canisters = {};\r\n  \r\n  constructor(host, identity) {\r\n    if (identity) this._identity = identity;\r\n    if (host) this._host = host;\r\n    this._makeAgent();\r\n  }\r\n  idl(canister, idl) {\r\n    this._mapIdls[canister] = idl;\r\n    return this;\r\n  };\r\n  setIdentity(identity) {\r\n    if (identity) this._identity = identity;\r\n    else this._identity = false;\r\n    this._makeAgent();\r\n    return this;\r\n  }\r\n  setHost(host) {\r\n    if (host) this._host = host;\r\n    else this._host = false;\r\n    this._makeAgent();\r\n    return this;\r\n  }\r\n  canister(cid, idl) {\r\n    if (!idl){\r\n      if (this._mapIdls.hasOwnProperty(cid)) {\r\n        idl = this._mapIdls[cid];\r\n      } else {\r\n        throw new Error(idl + \" is not a preloaded IDL\");\r\n      }\r\n    } else if (typeof idl == 'string') {\r\n      if (_preloadedIdls.hasOwnProperty(idl)) {\r\n        idl = _preloadedIdls[idl];\r\n      } else {\r\n        throw new Error(idl + \" is not a preloaded IDL\");\r\n      }\r\n    }\r\n    if (!this._canisters.hasOwnProperty(cid)){\r\n      this._canisters[cid] = Actor.createActor(idl, {agent : this._agent, canisterId : cid});\r\n    }\r\n    return this._canisters[cid];\r\n  }\r\n\r\n  _makeAgent() {\r\n    var args = {};\r\n    if (this._identity) args['identity'] = this._identity;\r\n    if (this._host) args['host'] = this._host;\r\n    this._agent = new HttpAgent(args);\r\n  };\r\n};\r\n\r\nconst api = {\r\n  connect : (host, identity) => new ExtConnection(host ?? \"https://boundary.ic0.app/\", identity),\r\n};\r\nexport default api;","export const idlFactory = ({ IDL }) => {\n  const HexNeighbors = IDL.Tuple(\n    IDL.Opt(IDL.Nat),\n    IDL.Opt(IDL.Nat),\n    IDL.Opt(IDL.Nat),\n    IDL.Opt(IDL.Nat),\n    IDL.Opt(IDL.Nat),\n    IDL.Opt(IDL.Nat),\n  );\n  const BoardHex = IDL.Record({\n    'sides' : HexNeighbors,\n    'coords' : IDL.Tuple(IDL.Nat8, IDL.Nat8),\n  });\n  const Board = IDL.Record({ 'hexs' : IDL.Vec(BoardHex), 'name' : IDL.Text });\n  const BoardId = IDL.Nat32;\n  const MagniAttack = IDL.Tuple(\n    IDL.Nat8,\n    IDL.Nat8,\n    IDL.Nat8,\n    IDL.Nat8,\n    IDL.Nat8,\n  );\n  const Magni = IDL.Record({\n    'img' : IDL.Text,\n    'name' : IDL.Text,\n    'attack' : MagniAttack,\n  });\n  const MagniId = IDL.Nat32;\n  const MagniNFTId = IDL.Nat32;\n  const ItemId = IDL.Nat32;\n  const MagniNFT = IDL.Record({\n    'exp' : IDL.Nat32,\n    'magni' : MagniId,\n    'upgrades' : IDL.Vec(ItemId),\n    'transferrable' : IDL.Bool,\n  });\n  const GameHash = IDL.Text;\n  const OpponentId = IDL.Nat32;\n  const GameOption = IDL.Variant({\n    'pvp' : IDL.Tuple(BoardId, IDL.Opt(GameHash)),\n    'practice' : BoardId,\n    'opponent' : OpponentId,\n  });\n  const GameId = IDL.Nat32;\n  const GameScore = IDL.Tuple(IDL.Nat8, IDL.Nat8);\n  const GameResult = IDL.Variant({\n    'result' : IDL.Tuple(GameScore, IDL.Principal, IDL.Opt(IDL.Principal)),\n    'noresult' : IDL.Tuple(IDL.Principal, IDL.Opt(IDL.Principal), IDL.Text),\n  });\n  const GameStatus = IDL.Variant({\n    'lead' : IDL.Null,\n    'play' : IDL.Null,\n    'ended' : GameResult,\n    'lobby' : IDL.Null,\n  });\n  const GameState = IDL.Record({\n    'status' : GameStatus,\n    'moves' : IDL.Vec(IDL.Tuple(IDL.Nat, IDL.Tuple(MagniNFTId, MagniNFT))),\n    'option' : GameOption,\n    'lead' : IDL.Vec(MagniNFT),\n    'score' : GameScore,\n    'players' : IDL.Vec(IDL.Principal),\n    'isPlayer1' : IDL.Bool,\n    'board' : Board,\n  });\n  const Response = IDL.Variant({\n    'ok' : IDL.Tuple(GameId, GameState),\n    'err' : IDL.Text,\n  });\n  const Move = IDL.Record({ 'hex' : IDL.Nat, 'magni' : MagniNFTId });\n  const PlayerMove = IDL.Variant({ 'lead' : MagniNFTId, 'move' : Move });\n  const GameData = IDL.Record({\n    'magni' : IDL.Vec(IDL.Tuple(MagniId, Magni)),\n    'boards' : IDL.Vec(IDL.Tuple(BoardId, Board)),\n  });\n  return IDL.Service({\n    'addBoard' : IDL.Func([Board], [BoardId], []),\n    'addMagni' : IDL.Func([Magni], [MagniId], []),\n    'connect' : IDL.Func([], [IDL.Vec(IDL.Tuple(MagniNFTId, MagniNFT))], []),\n    'gameCreate' : IDL.Func([GameOption, IDL.Vec(MagniNFTId)], [Response], []),\n    'gameFetch' : IDL.Func([], [Response], []),\n    'gameFind' : IDL.Func([IDL.Vec(MagniNFTId)], [Response], []),\n    'gameJoin' : IDL.Func([GameHash, IDL.Vec(MagniNFTId)], [Response], []),\n    'gameLeave' : IDL.Func([GameId], [Response], []),\n    'gameMove' : IDL.Func([PlayerMove], [Response], []),\n    'gamePoll' : IDL.Func([GameId], [Response], ['query']),\n    'gameScore' : IDL.Func([GameId], [GameScore], ['query']),\n    'getAllPlayerMagnis' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(IDL.Principal, IDL.Vec(MagniNFTId)))],\n        ['query'],\n      ),\n    'getGameData' : IDL.Func([], [GameData], ['query']),\n    'getMyMagni' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(MagniNFTId, MagniNFT))],\n        ['query'],\n      ),\n    'whoami' : IDL.Func([], [IDL.Principal], ['query']),\n  });\n};\nexport const init = ({ IDL }) => { return []; };","import api from \"./extjs.js\";  \nimport * as rotmIDL from \"./rotm.did.js\";  \nimport { Ed25519KeyIdentity } from \"@dfinity/identity\";\nimport { AuthClient } from \"@dfinity/auth-client\";\nimport {Howl, Howler} from 'howler';\nimport OpenLogin from \"@toruslabs/openlogin\";\nvar AUTH, logintype;\nconst openlogin = new OpenLogin({\n  clientId: \"BHsvffJZzsm_Kb-xNOO9fGOZ2ciiMHlRjgBCeTRw18Io6OBE0QR4nd0R8AGZmL6wK9KFr9LbDeNNuj6yutSbTUA\",\n  network: \"mainnet\", // valid values (testnet or mainnet)\n  uxMode : 'popup',\n});\nshowLoader()\ndocument.addEventListener('DOMContentLoaded', async () => {\n  API = api.connect().idl('p5mob-qaaaa-aaaah-qaebq-cai', rotmIDL.idlFactory).canister('p5mob-qaaaa-aaaah-qaebq-cai');\n  AUTH = await AuthClient.create();\n  await openlogin.init();\n  var GD = await API.getGameData();\n  for(var i = 0; i < GD.magni.length; i++) {\n    CONFIG.magni.push([GD.magni[i][1].name].concat(GD.magni[i][1].attack));\n  };\n  for(var i = 0; i < GD.boards.length; i++) {\n    var _tb = [];\n    CONFIG.boards[GD.boards[i][1].name.toLowerCase()] = GD.boards[i][1].hexs.map(a => a.coords);\n  };\n  document.addEventListener('click', ({ offsetX, offsetY }) => {\n    if (typeof currentRoom.click != 'undefined'){\n      currentRoom.click(offsetX, offsetY);\n    }\n  });\n  hideLoader()\n  rooms.login.enter();\n});\nwindow.addEventListener(\"beforeunload\", function(e){\n   unloadROTM();\n}, false);\nwindow.onbeforeunload = unloadROTM;\nasync function unloadROTM(){\n  await ROTM.gameLeave();\n  return null;\n}\nwindow.addEventListener('blur', () => {\n  if (currentSound && !bgmuted) currentSound.mute(true);\n});\nwindow.addEventListener('focus', () => {\n  if (currentSound && !bgmuted) currentSound.mute(false);\n});\nconst updateGameState = (gs) => {\n  if (!ROTM._intv) return;\n  if (state == 'find') {\n    if (gs.status.hasOwnProperty('lead')) {\n      rooms.game.enter();\n      SOUND.alert.play();\n      ROTM._stopPolling();\n      state = 'busy';\n    };\n  }\n  if (state == 'busy') {\n    if (gs.status.hasOwnProperty('lead')) {\n      if (gameState == 1) { //We have submitted our lead\n        if (gs.lead.length == 0 || !gs.isPlayer1) {\n          //We need to resubmit ours\n          gameState = 0;\n          drawMessage(\"It was a tie - Choose another Strike Unit!\");\n          SOUND.alert.play();\n          selectedHex.unhighlight();\n          selectedHex = false;\n          ROTM._stopPolling();\n        } else {\n          //Waiting\n          //console.log(\"Waiting for opponent to choose their Strike Unit\");\n          //Keep polling\n        }\n      }\n    };\n    if (gs.status.hasOwnProperty('play')) {\n      if (gameState == 1) {\n        gameState = 2;\n        selectedHex.clear();\n        selectedHex = false;\n        if (gs.isPlayer1) {\n          currentPlayer = 1;\n          otherPlayer = 2;\n        } else {\n          otherPlayer = 1;\n          currentPlayer = 2;\n        }\n      }\n      if (gs.isPlayer1 && gs.moves.length % 2 == 0) {\n        isPlayersTurn = true;\n        ROTM._stopPolling();\n        SOUND.alert.play()\n        drawMessage(\"It is your turn now - Deploy a Magni!\");\n      } else if (!gs.isPlayer1 && gs.moves.length % 2 == 1) {\n        isPlayersTurn = true;\n        ROTM._stopPolling();\n        SOUND.alert.play()\n        drawMessage(\"It is your turn now - Deploy a Magni!\");\n      } else {\n        isPlayersTurn = false;\n      }\n    };\n    if (gs.status.hasOwnProperty('ended')) {\n      //state = 'free';\n      ROTM._stopPolling();\n      gameState = 3;\n      //console.log(gs.status.ended);\n      if (gs.status.ended.hasOwnProperty('noresult')) {\n        drawMessage(\"Game over - \"+gs.status.ended.noresult[2]+\"!\");       \n        rooms.game.backButton.show()       \n        SOUND.win.play()\n      } else if (gs.status.ended.hasOwnProperty('result')) {\n        drawMessage(\"Game over - you \"+scoreMsg()+\"!\");\n        if (scoreMsg() == \"won\") SOUND.win.play();\n        else SOUND.lose.play();\n        rooms.game.backButton.show()       \n      }\n      bgmusic();\n    };\n  };\n  if (gs.moves.length > movesMade) {\n    //console.log(\"Updating moves\");\n    for (var i = movesMade; i < gs.moves.length; i++) {\n      var p = (i%2 == 0 ? 1 : 2);\n      gamegrid[gs.moves[i][0]].isPlayerHex = (p == currentPlayer);\n      gamegrid[gs.moves[i][0]].place(p, gs.moves[i][1], (p == currentPlayer ? CONFIG.colors.ally : CONFIG.colors.enemy));\n      if (i >= 2) placeHex(gamegrid[gs.moves[i][0]]);\n    }\n    movesMade = gs.moves.length;\n  };\n  if (currentRoom == rooms.game) drawScore();\n};\n\nconst fromHexString = (hex) => {\n  if (hex.substr(0,2) === \"0x\") hex = hex.substr(2);\n  for (var bytes = [], c = 0; c < hex.length; c += 2)\n  bytes.push(parseInt(hex.substr(c, 2), 16));\n  return bytes;\n}\nconst ROTM = {\n  _gameState : false,\n  _gameId : false,\n  _intv : false,\n  _clearPolling : () => {\n    isPlayersTurn = false;\n    if (ROTM._intv) clearInterval(ROTM._intv);\n    ROTM._intv = false;\n  },\n  _stopPolling : () => {\n    if (ROTM._intv) clearInterval(ROTM._intv);\n    ROTM._intv = false;\n  },\n  _startPolling : () => {\n    ROTM._intv = setInterval(() => {\n      API.gamePoll(ROTM._gameId).then(r => {\n        //console.log(r);\n        if (r.hasOwnProperty(\"ok\")){\n          ROTM._gameState = r.ok[1];\n          updateGameState(ROTM._gameState);\n        } else {\n          console.log(r.err);\n        };\n      });\n    }, 1*1000);\n  },\n  inGame : () => {\n    if (!ROTM._gameState) return false;\n    if (ROTM._gameState.status.hasOwnProperty(\"#ended\")) return false;\n    return true;\n  },\n  /*\n  gameCreate : (roster, poll) => {\n    if (ROTM.inGame()) return;\n  },\n  gameJoin : async (roster, poll) => {\n    if (ROTM.inGame()) return;\n  },\n  */\n  gameFind : (roster, poll) => {\n    return new Promise(async (resolve, reject) => {    \n      if (ROTM.inGame()) reject(\"in game\");\n      var mids = roster.map(m => m[0]);\n      \n      API.gameFind(mids).then(resp => {\n        if (resp.hasOwnProperty('ok')) {\n          ROTM._gameId = resp.ok[0];\n          ROTM._gameState = resp.ok[1];\n          ROTM._startPolling();\n          updateGameState(ROTM._gameState);\n          resolve(ROTM._gameState);\n        } else {\n          reject(resp.err);\n        };\n      }).catch(reject);\n    });\n  },\n  gamePractise : (roster, poll) => {\n    return new Promise(async (resolve, reject) => {    \n      if (ROTM.inGame()) reject(\"in game\");\n      var mids = roster.map(m => m[0]);\n      \n      API.gameCreate({\n        practice : 0\n      }, mids).then(resp => {\n        if (resp.hasOwnProperty('ok')) {\n          ROTM._gameId = resp.ok[0];\n          ROTM._gameState = resp.ok[1];\n          ROTM._startPolling();\n          updateGameState(ROTM._gameState);\n          resolve(ROTM._gameState);\n        } else {\n          reject(resp.err);\n        };\n      }).catch(reject);\n    });\n  },\n  gameMove : async (magni, position) => {\n    return new Promise(async (resolve, reject) => {    \n      if (position) {\n        API.gameMove({\"move\" : { hex : position, magni : magni[0] }}).then(resp => {\n          //console.log(resp);\n          if (resp.hasOwnProperty('ok')) {\n            ROTM._gameState = resp.ok[1];\n            movesMade++;\n            ROTM._startPolling();\n            updateGameState(ROTM._gameState);\n            resolve(ROTM._gameState);\n          } else {\n            reject(resp.err);\n          };\n        }).catch(reject);\n      } else {\n        API.gameMove({\"lead\" : magni[0]}).then(resp => {\n          if (resp.hasOwnProperty('ok')) {\n            ROTM._gameState = resp.ok[1];\n            ROTM._startPolling();\n            updateGameState(ROTM._gameState);\n            resolve(ROTM._gameState);\n          } else {\n            reject(resp.err);\n          };\n        }).catch(reject);   \n      }\n    });\n  },\n  gameEnd : () => {\n    ROTM._clearPolling();\n    ROTM._gameId = false;\n    ROTM._gameState = false;    \n  },\n  gameLeave : async () => {\n    ROTM._clearPolling();\n    if (ROTM._gameId) await API.gameLeave(ROTM._gameId);\n    ROTM._gameId = false;\n    ROTM._gameState = false;    \n  },\n  connect : async () => {\n    mymagni = await API.connect();\n    //console.log(mymagni);\n  },\n  stats : async () => {\n  \n  },\n  gs : () => {\n    return ROTM._gameState;\n  }\n};\n\nvar rooms = {\n  login : {\n    draw : INNERDRAW.group(),\n    enter : async () => {\n      if (currentRoom) currentRoom.exit();\n      currentRoom = rooms.login;\n      currentRoom.draw.clear();\n      \n      showLoader();\n      var id = await AUTH.getIdentity();\n      if (id.getPrincipal().toString() != '2vxsx-fae') {\n        logintype = 'ii';\n        identity = id;\n        API = api.connect(\"https://boundary.ic0.app/\",identity).idl('p5mob-qaaaa-aaaah-qaebq-cai', rotmIDL.idlFactory).canister('p5mob-qaaaa-aaaah-qaebq-cai');\n        await ROTM.connect();\n        setTimeout(() => {\n          rooms.menu.enter();\n          bgmusic('lobby');\n        }, 200);\n      };\n      if (openlogin.privKey) {\n        logintype = 'openlogin';\n        identity = Ed25519KeyIdentity.generate(new Uint8Array(fromHexString(openlogin.privKey)));\n        \n        API = api.connect(\"https://boundary.ic0.app/\",identity).idl('p5mob-qaaaa-aaaah-qaebq-cai', rotmIDL.idlFactory).canister('p5mob-qaaaa-aaaah-qaebq-cai');\n        await ROTM.connect();\n        setTimeout(() => {\n          rooms.menu.enter();\n          bgmusic('lobby');\n        }, 200);\n      }\n      hideLoader();\n      setBackground('assets/bgs/menu.jpg');\n      createButton(500,500,200,40,'Internet Identity', async () => {\n        if (!identity) {\n          showLoader();\n          AUTH.login({\n            maxTimeToLive : BigInt(24*60*60*1000000000),\n            identityProvider: \"https://identity.ic0.app/\",\n            onSuccess: async () => {\n              logintype = 'ii';\n              identity = await AUTH.getIdentity()\n              \n              API = api.connect(\"https://boundary.ic0.app/\",identity).idl('p5mob-qaaaa-aaaah-qaebq-cai', rotmIDL.idlFactory).canister('p5mob-qaaaa-aaaah-qaebq-cai');\n              await ROTM.connect()\n              hideLoader();\n              rooms.menu.enter();\n              bgmusic('lobby');\n            },\n            onError : () => {\n              hideLoader();\n              alert(\"Error logging in...\");\n            }\n          });\n        }\n      });\n      createButton(500,560,200,40,'Open Login', async () => {\n        if (!identity) {\n          showLoader();\n          await openlogin.login();\n          if (openlogin.privKey) {\n            logintype = 'openlogin';\n            identity = Ed25519KeyIdentity.generate(new Uint8Array(fromHexString(openlogin.privKey)));\n            \n            API = api.connect(\"https://boundary.ic0.app/\",identity).idl('p5mob-qaaaa-aaaah-qaebq-cai', rotmIDL.idlFactory).canister('p5mob-qaaaa-aaaah-qaebq-cai');\n            await ROTM.connect()\n            hideLoader();\n            rooms.menu.enter();\n            bgmusic('lobby');\n          } else {\n            hideLoader();\n            alert(\"Error logging in...\");\n          }\n          \n        }\n      });\n      createButton(500,680,200,40,'Help', () => {\n        window.open('https://toniqlabs.gitbook.io/rise-of-the-magni/', '_blank').focus();\n      });\n    },\n    exit : () => {\n      currentRoom.draw.clear();\n    }\n  },\n  menu : {\n    draw : INNERDRAW.group(),\n    enter : () => {\n      if (currentRoom) currentRoom.exit();\n      currentRoom = rooms.menu;\n      currentRoom.draw.clear();\n      \n      setBackground('assets/bgs/menu.jpg');\n      createButton(500,500,200,40,'Adventure', () => {\n        alert(\"Sorry, not available yet...!\");\n        //setTimeout(() => rooms.lobby.enter(0), 100);\n      });\n      createButton(500,560,200,40,'Training', () => {\n        setTimeout(() => rooms.lobby.enter(1), 100);\n      });\n      createButton(500,620,200,40,'Online', () => {\n        setTimeout(() => rooms.lobby.enter(2), 100);\n      });\n      createButton(500,680,200,40,'Settings', () => {\n        setTimeout(() => rooms.settings.enter(), 100);\n      });\n      createButton(500,740,200,40,'Logout', () => {\n        setTimeout(async () => {\n          if (logintype == 'ii') {\n            await AUTH.logout();            \n          } else {\n            await openlogin.logout();\n          };\n          identity = false;\n          API = api.connect().idl('p5mob-qaaaa-aaaah-qaebq-cai', rotmIDL.idlFactory).canister('p5mob-qaaaa-aaaah-qaebq-cai');\n          rooms.login.enter()\n        }, 100);\n      });\n    },\n    exit : () => {\n      currentRoom.draw.clear();\n    }\n  },\n  settings : {\n    draw : INNERDRAW.group(),\n    enter : () => {\n      if (currentRoom) currentRoom.exit();\n      currentRoom = rooms.settings;\n      currentRoom.draw.clear();\n      \n      setBackground('assets/bgs/menu.jpg');\n      var msfx, umsfx, mbg, umbg; \n      msfx = createButton(500,500,200,40,'Mute SFX', () => {\n        SOUND.alert.mute(true);\n        SOUND.select.mute(true);\n        SOUND.place.mute(true);\n        SOUND.lose.mute(true);\n        SOUND.win.mute(true);\n        msfx.hide();\n        umsfx.show();\n        sfxmuted = true;\n      });\n      umsfx = createButton(500,500,200,40,'Unmute SFX', () => {\n        SOUND.alert.mute(false);\n        SOUND.select.mute(false);\n        SOUND.place.mute(false);\n        SOUND.lose.mute(false);\n        SOUND.win.mute(false);\n        umsfx.hide();\n        msfx.show();\n        sfxmuted = false;\n      });\n      if (sfxmuted) msfx.hide();\n      else umsfx.hide();\n      mbg = createButton(500,560,200,40,'Mute BG Music', () => {\n        bgmuted = true;\n        currentSound.mute(true)\n        mbg.hide();\n        umbg.show();\n      });\n      umbg = createButton(500,560,200,40,'Unmute BG Music', () => {\n        bgmuted = false;\n        currentSound.mute(false)\n        mbg.show();\n        umbg.hide();\n      });\n      if (bgmuted) mbg.hide();\n      else umbg.hide();\n      createButton(500,620,200,40,'Help', () => {\n        window.open('https://toniqlabs.gitbook.io/rise-of-the-magni/', '_blank').focus();\n      });\n      createButton(500,680,200,40,'Back', () => {\n        setTimeout(() => rooms.menu.enter(), 100);\n      });\n    },\n    exit : () => {\n      currentRoom.draw.clear();\n    }\n  },\n  adventure : {\n    draw : INNERDRAW.group(),\n    chapter : false,\n    stage : false,\n    scene : false,\n    clickHandler : false,\n    inAdventureMode : false,\n    enter : (c,s) => {\n      if (currentRoom) currentRoom.exit();\n      currentRoom = rooms.adventure;\n      if (rooms.adventure.inAdventureMode) {\n        currentRoom.draw.show();\n      } else {\n        rooms.adventure.inAdventureMode = true;\n        currentRoom.draw.clear();\n        \n        rooms.adventure.scene = currentRoom.draw.group();\n        \n        rooms.adventure.chapter = 0;\n        rooms.adventure.stage = 0;\n        \n        launchAdventure(c,s);\n      }\n    },\n    exit : () => {\n      if (!rooms.adventure.inAdventureMode)\n        currentRoom.draw.clear();\n      else\n        currentRoom.draw.hide();\n    },\n    click : (offsetX, offsetY) => {\n      if (rooms.adventure.clickHandler) {\n        rooms.adventure.clickHandler();\n      }\n    }\n  },\n  lobby : {\n    headerMessage : false,\n    draw : INNERDRAW.group(),\n    hexClickHandler : (offsetX, offsetY, hex) => {\n      if (currentRoom != rooms.lobby) return;\n      if (!buttonIsFree) return;\n      buttonIsFree = false;\n      var hexCoordinates = { x : hex.x, y : hex.y };\n      //console.log(hex);\n      if (hex.type == 'hero') {\n        for(var i = 0; i < playergrid.length; i++) {\n          if (playergrid[i].magni == false) {\n            playergrid[i].isPlayerHex = true;\n            playergrid[i].set(hex.magni, CONFIG.colors.hexBg);\n            hex.removeCard();\n            SOUND.select.play();\n            updateSelectedTeam();\n            break;\n          }         \n        }\n      } else if (hex.type == 'team'){\n        if (hex.magni !== false){\n          for(var i = 0; i < herogrid.length; i++) {\n            if (herogrid[i].magni == false) {\n              herogrid[i].set(hex.magni, CONFIG.colors.hexBg);\n              break;\n            }         \n          }\n          hex.removeCard();\n          SOUND.select.play();\n          updateSelectedTeam();\n        }\n      } else if (hex.type == 'special'){\n        var magnitomove = []\n        SOUND.select.play();\n        for(var i = 0; i < playergrid.length; i++) {\n          if (playergrid[i].magni !== false) {\n            magnitomove.push(playergrid[i].magni);\n            playergrid[i].removeCard();\n          } \n        }\n        if (magnitomove.length > 0) {\n          for(var i = 0; i < herogrid.length; i++) {\n            if (herogrid[i].magni == false) {\n              herogrid[i].set(magnitomove.pop(), CONFIG.colors.hexBg);\n              if (magnitomove.length == 0) break;\n            } \n          }\n        }\n        for(var i = 0; i < herogrid.length; i++) {\n          if (CONFIG.starters[hex.magni][1].indexOf(herogrid[i].magni[1].magni) >= 0) {\n            magnitomove.push(herogrid[i].magni);\n            herogrid[i].removeCard();\n            if (magnitomove.length == 10) break;\n          }\n        };\n        for(var i = 0; i < magnitomove.length; i++) {\n          playergrid[i].isPlayerHex = true;\n          playergrid[i].set(magnitomove[i], CONFIG.colors.hexBg);\n        };\n        updateSelectedTeam();\n      }\n      drawCurrentRating();\n      buttonIsFree = true;\n    },\n    gameMode : 0,\n    enter : (gm) => {\n      if (currentRoom) currentRoom.exit();\n      currentRoom = rooms.lobby;\n      currentRoom.draw.clear();\n      if (typeof gm != 'undefined' && gm !== false) rooms.lobby.gameMode = gm;\n      setBackground('assets/bgs/lobby.jpg');\n      drawMessage(\"Select your team!\");\n      \n      //Buttons\n      var playOnlineBtn, backBtn, cancelBtn;\n      if (rooms.lobby.gameMode == 0){\n        createButton(1020,10,150,40,'Start Adventure', function(){\n          if (isValidTeam()) {\n            rooms.adventure.enter(0,0);\n          } else {\n            alert(\"Please select a full team with a rating of 23 or less\");\n          }\n        });  \n      } else if (rooms.lobby.gameMode == 1){\n        createButton(1020,10,150,40,'Start Training', function(){\n          if (isValidTeam()) {\n            if (state != 'free') return;\n            showLoader();\n            ROTM.gamePractise(selectedTeam, updateGameState).then(() => {\n              rooms.game.enter();\n              SOUND.alert.play();\n              ROTM._stopPolling();\n              state = 'busy';\n            }).catch(e => {\n              state = 'free';\n              alert(e);\n            }).finally(() => {\n              hideLoader();\n            });\n          } else {\n            alert(\"Please select a full team with a rating of 23 or less\");\n          }\n        });        \n      } else if (rooms.lobby.gameMode == 2){\n        playOnlineBtn = createButton(1020,10,150,40,'Play Online', () => {\n          if (isValidTeam()) {\n            if (state != 'free') return;\n            showLoader();\n            ROTM.gameFind(selectedTeam, updateGameState).then(() => {\n              state = 'find';\n              drawMessage(\"Finding a match...\");\n              playOnlineBtn.hide();\n              backBtn.hide();\n              cancelBtn.show();\n            }).catch(e => {\n              alert(e);\n            }).finally(() => {\n              hideLoader();\n            });\n          } else {\n            alert(\"Please select a full team with a rating of 23 or less\");\n          }\n        });\n        cancelBtn = createButton(1020,60,150,40,'Cancel', () => {\n          showLoader();\n          ROTM.gameLeave().then(() => {\n            state = 'free';\n            drawMessage(\"Select your team!\");\n            cancelBtn.hide();\n            playOnlineBtn.show();\n            backBtn.show();\n          }).catch(e => {\n            alert(e);\n          }).finally(() => {\n            hideLoader();\n          });\n        });\n        cancelBtn.hide();\n        \n      }\n      \n      backBtn = createButton(1020,60,150,40,'Back', function(){\n        rooms.menu.enter();\n      });  \n      \n      selectedHex = false;\n      state = 'free';\n      herogrid.map((hex, i) => {\n        hex.init('hero', currentRoom.draw.group());\n        if (i < mymagni.length) {\n          if (selectedTeam.indexOf(mymagni[i]) < 0) hex.set(mymagni[i], CONFIG.colors.hexBg);\n        }\n      });\n      playergrid.map((hex, i) => {\n        hex.isPlayerHex = true;\n        hex.init('team', currentRoom.draw.group());\n        if (selectedTeam.length > i)\n          hex.set(selectedTeam[i], CONFIG.colors.hexBg);\n      });\n      premadegrid.map((hex, i) => {\n        hex.init('special', currentRoom.draw.group());\n        hex.special(CONFIG.starters[i][0], i);\n      });\n      drawCurrentRating()\n    },\n    click : (offsetX, offsetY) => {\n\n    },\n    exit : () => {\n      currentRoom.draw.clear();\n      currentRoom.headerMessage = false;\n      omd = false;\n      rd = false;\n    }\n  },\n  game : {\n    headerMessage : false,\n    draw : INNERDRAW.group(),\n    hexClickHandler : (offsetX, offsetY, hex) => {\n      if (gameState == 3) return;\n      var hexCoordinates = { x : hex.x, y : hex.y };\n      if (gameState == 0){\n        if (hex.type == 'team') {\n          selectedHex = hex;\n          selectedHex.highlight(CONFIG.colors.ally)\n          gameState = 1;\n          drawMessage(\"Waiting for other player...\");\n          ROTM.gameMove(selectedHex.magni);\n          SOUND.select.play();\n        }\n      } else if (gameState == 2){\n        if (isPlayersTurn){\n          if (hex.type == 'game') {\n            if (hex.player == 0){\n              if (selectedHex) {\n                ROTM.gameMove(selectedHex.magni, hex.index);\n                hex.isPlayerHex = true;\n                isPlayersTurn = false;\n                hex.place(currentPlayer, selectedHex.magni, CONFIG.colors.ally);\n                SOUND.place.play();\n                placeHex(hex, true);\n                selectedHex.clear();\n                drawMessage(\"Waiting for other player...\");\n              }\n            }\n          }\n          if (hex.type == 'team' && hex.magni !== false) {\n            if (selectedHex) selectedHex.unhighlight();\n            hex.highlight(CONFIG.colors.ally)\n            selectedHex = hex;\n            SOUND.select.play();\n          }\n        }\n      }\n    },\n    character : false,\n    board : false,\n    result : 0,\n    playerScore : 0,\n    opponentScore : 0,\n    enter : (bbt, bbfn, board, character) => {\n      if (currentRoom) currentRoom.exit();\n      currentRoom = rooms.game;\n      currentRoom.draw.clear();\n      localScore = [0,0];\n      bgmusic('battle');\n      setBackground('assets/bgs/arena.jpg');\n      selectedHex = false;\n      gameState = 0;\n      movesMade = 0;\n      if (character) rooms.game.character = character;\n      if (!bbt) bbt = \"Back\";\n      if (!bbfn) bbfn = (r) => {    \n        bgmusic('lobby');\n        ROTM.gameEnd();\n        rooms.lobby.enter()\n      };\n      if (!board) board = CONFIG.boards.standard;\n      gamegrid = Grid(board);\n      rooms.game.board = board;\n      rooms.game.backButton = createButton(1020,10,150,40, bbt, () => {\n        bbfn(rooms.game.result);\n      });\n      rooms.game.backButton.hide();\n      \n      //Draw game grid\n      gamegrid.map((hex, i) => {\n        hex.index = i;\n        hex.magni = false;\n        hex.player = 0;\n        hex.init('game', currentRoom.draw.group());\n      });\n      var c = 0;\n      playergrid.map(hex => {\n        hex.isPlayerHex = true;\n        hex.init('team', currentRoom.draw.group());\n        hex.set(selectedTeam[c++], CONFIG.colors.hexBg);\n      });\n      \n      //Reset variables\n      drawMessage(\"Game found - Select your Strike Unit\");\n    },\n    exit : () => {\n      currentRoom.draw.clear();\n      currentRoom.headerMessage = false;\n      st1 = false;\n      st2 = false;\n      omd = false;\n    }\n  }\n}\nwindow.rooms = rooms;\nwindow.ROTM = ROTM;\n\n\nwindow.SOUND = {\n  alert : new Howl({src: ['assets/sounds/alert.mp3']}),\n  battle : new Howl({src: ['assets/sounds/battle.wav']}),\n  lobby : new Howl({src: ['assets/sounds/lobby.wav']}),\n  lose : new Howl({src: ['assets/sounds/lose.wav']}),\n  place : new Howl({src: ['assets/sounds/place.wav']}),\n  select : new Howl({src: ['assets/sounds/select.mp3']}),\n  win : new Howl({src: ['assets/sounds/win.mp3']}),\n};\nSOUND.battle.volume(0.5);\nSOUND.alert.volume(0.2);\nSOUND.select.volume(0.4);\nSOUND.place.volume(0.1);\nSOUND.lose.volume(0.1);\nSOUND.win.volume(0.1);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t296: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkrotm_v2\"] = self[\"webpackChunkrotm_v2\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [38], () => (__webpack_require__(5872)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}